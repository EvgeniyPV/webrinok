// feedback chooses
const chooses = document.querySelectorAll('.feedback__chooses-item')

chooses.forEach(function (item, index) {
    item.addEventListener('click', () => {
        item.classList.toggle('active')
    })
})


// select add
const choosesServices = document.querySelectorAll('.feedback-services .feedback__chooses-item')
const choosesSocials = document.querySelectorAll('.feedback-socials .feedback__chooses-item')

choosesServices.forEach(function (item, index) {
    item.addEventListener('click', () => {
        let text = ''
        choosesServices.forEach(function (item2, index2) {
            if (item2.classList.contains('active')) {
                if (text === '') {
                    text = text + item2.innerHTML
                } else {
                    text = text + ',' + item2.innerHTML
                }

            }
        })
        item.parentElement.parentElement.children[0].innerHTML = text
        document.querySelector('[name="services-111"]').value = text
        document.querySelector('.feedback-services').classList.remove('error')
    })
})

choosesSocials.forEach(function (item, index) {
    item.addEventListener('click', () => {
        let text = ''
        choosesSocials.forEach(function (item2, index2) {
            if (item2.classList.contains('active')) {
                if (text === '') {
                    text = text + item2.innerHTML
                } else {
                    text = text + ',' + item2.innerHTML
                }

            }
        })
        item.parentElement.parentElement.children[0].innerHTML = text
        document.querySelector('[name="socials-111"]').value = text
        document.querySelector('.feedback-socials').classList.remove('error')
    })
})


// labels error

document.querySelector('.wpcf7-form').addEventListener('wpcf7submit', () => {
    if (document.querySelector('[name="socials-111"]').value === '') {
        document.querySelector('.feedback-socials').classList.add('error')
    } else {
        document.querySelector('.feedback-socials').classList.remove('error')
    }
    if (document.querySelector('[name="services-111"]').value === '') {
        document.querySelector('.feedback-services').classList.add('error')
    } else {
        document.querySelector('.feedback-services').classList.remove('error')
    }
})

document.querySelector('.wpcf7-form').addEventListener('wpcf7mailsent', () => {
    document.querySelector('.feedback-btn').classList.add('disabled')
})

// checkbox logic

document.querySelector('.feedback__check input').addEventListener('change', () => {
    if (document.querySelector('.feedback__check input').checked) {
        document.querySelector('.feedback-btn').classList.remove('disabled')
    } else {
        document.querySelector('.feedback-btn').classList.add('disabled')
    }
})




// mobile menu
const burger = document.querySelector('.header__burger')
const menu = document.querySelector('.header__menu')
const body = document.querySelector('body')

burger.addEventListener('click', () => {
    menu.classList.toggle('active')
    burger.classList.toggle('active')
    body.classList.toggle('scroll')
})

// mobile select

const selects = document.querySelectorAll('.feedback__chooses-select')

selects.forEach(function (item, index) {
    item.addEventListener('click', (e) => {
        if (!item.classList.contains('active')) {
            selects.forEach(function (item, index) {
                item.classList.remove('active')
            })
            if (!e.target.closest('.feedback__chooses-items')) {
                item.classList.add('active')
            }
        }
    })
})


body.addEventListener('click', (e) => {
    if (!e.target.closest('.feedback__chooses-select')) {
        selects.forEach(function (item, index) {
            item.classList.remove('active')
        })
    }
})
